<!DOCTYPE html>
<html>
<head>
    <!-- https://imququ.com/post/reduce-ttfb-on-thinkjs3-website.html -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <!-- <meta name="application name" content="web博客分享:Vue3组合式apiscript setup提案使用emitprop组件通信,写于：2021-03-17 15:50:14">
    <meta name="keywords" content="VUE">
    <meta name="description" content="Vue3 compositionAPI使用script setup提案中emit，props实现组件传值">
    <meta name="author" content="菜鸡老刘">
    <meta name="copyright" content="菜鸡老刘：blog.blogweb.cn"> -->
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/pc.css">
    <title>我是标题</title>

</head>
<body>
    <header>
        <img src="./image/writer-face.png" alt="左侧导航栏作者头像" class="writer-face">
        <nav>
            <h1 class="writer-name">名字</h1>
            <p class="write-text">WEB开发</p>
            <div class="nav">
                <a href="">首页</a>
                <a href="">专题</a>
                <a href="">文章</a>
                <a href="">关于</a>
            </div>
            <div class="navs">
                <a href="https://github.com/Lrunlin">
                    <img src="./image/github.png" alt="作者推" class="clearMargin">
                </a>
                <a href="javascript:;">
                    <img src="./image/wechat.png" alt="作者微信">
                </a>
                <a href="javascript:;">
                    <img src="./image/qq.png" alt="作者QQ">
                </a>
            </div>
        </nav>
    </header>
    <article>
        <div class="article-head">
            <h1 class="article-title">
                博客文章标题
            </h1>
            <div class="article-time">
                2021-03-23 14:38:11
            </div>
        </div>
        <div class="article-warn">
            提醒:本文最后更新与&nbsp;<span class="warnTime"></span>&nbsp;天前，文中所描述的信息可能已发生变化，请谨慎使用。
        </div>
        <div id="article">
            <!-- 文章主要内容 -->



            <p>在Vue3组合式api开发中，所有模板中使用的变量都需要return暴露模板，这样会给开发者增加很多心智负担，所以又有了提案script setup</p>
            <p>之前：</p>
            <pre type="VUE" data-handle="true"><div class="code-title">VUE</div><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
</span><span class="hljs-template-variable">{{<span class="hljs-name">mes</span>}}</span><span class="xml">
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> &gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> {ref} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
<span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> {
  <span class="hljs-keyword">let</span> mes=ref(<span class="hljs-string">'我是加载信息'</span>)
}
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre>
            <p>提案：</p>
            <pre type="VUE" data-handle="true"><div class="code-title">VUE</div><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  </span><span class="hljs-template-variable">{{ mes }</span><span class="xml">}
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>=<span class="hljs-string">"prop,</span></span></span><span class="hljs-template-variable">{emit}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">{ref}</span><span class="xml"><span class="javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
  <span class="hljs-keyword">let</span> mes=ref(<span class="hljs-string">'我是加载信息'</span>)
  emit(函数命，参数)<span class="hljs-comment">//子传父</span>
  <span class="hljs-built_in">console</span>.log(prop.名字);<span class="hljs-comment">//获取父组件的传值</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre>
            <p>但是在我开发中使用发现变量名字无需return，但是props和ctx参数无法使用，还报出了一些错误</p>
            <p>本着对vue的热爱，我跑去 推 询问作者<a href="https://baike.baidu.com/item/%E5%B0%A4%E9%9B%A8%E6%BA%AA/2281470"
                    target="_blank">尤雨溪</a>，并且得到了回复：</p>
            <p><img style="max-width:100%;" data-src="https://blogweb.cn/assets/image/1f0vk8uh4.jpg"
                    alt="关于VUE技术讲解图片"><br></p>
            <p><span style="font-size: 1em;">简单的看就是我使用的方法过时了，不在使用，在去GitHub察看最新方案后，整理出：</span><br></p>
            <pre type="VUE" data-handle="true"><div class="code-title">VUE</div><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
</span><span class="hljs-template-variable">{{mes}</span><span class="xml">}
&lt;组件&gt;&lt;/组件&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> </span></span><span class="hljs-template-variable">{defineEmit, defineProps, ref}</span><span class="xml"><span class="javascript"> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> 组件 <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/组件名字'</span>
<span class="hljs-keyword">let</span> mes=ref(<span class="hljs-string">'我是文字消息'</span>);

<span class="hljs-keyword">let</span> emit=defineEmit();
emit(<span class="hljs-string">'函数名字'</span>,参数)<span class="hljs-comment">//子&gt;父</span>

<span class="hljs-keyword">let</span> prop=defineProps(</span></span><span class="hljs-template-variable">{
  name:type
}</span><span class="xml"><span class="javascript">)
<span class="hljs-built_in">console</span>.log(prop.name);<span class="hljs-comment">//获取父组件的值</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre>
            <p>变化：</p>
            <ol>
                <li>prop，emit等参数需要引入（推荐使用vscode函数内使用会直接帮助您引入）</li>
                <li>组件不在components需要定义只需引入</li>
                <li>双向绑定变量不在需要return全部暴露模板</li>
            </ol>






        </div>
    </article>
    <footer>
        <p class="foot-title">
            发布于
            <span id="foot-time"></span>,
            并添加「 <span id="foot-type"></span> 」
            标签。
        </p>
        <p class="foot-writer">
            @2021-菜鸡老刘的小站-
            <a href="https://beian.miit.gov.cn/" target="_blank">辽ICP备2020014377号-2</a>
        </p>
    </footer>
    <script>
        // let article=data;
    </script>
    <script src="./js/jquery.js"></script>
    <script src="./js/index.js" type="module"></script>
    <script src="./js/pc.js"></script>
</body>
</html>